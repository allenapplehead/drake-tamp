import matplotlib
import yaml

matplotlib.use("Agg")
import yaml
from experiments.two_arm_blocks_world.two_arm_data_generation import make_problem
import itertools
import os
FILEPATH, _ = os.path.split(os.path.realpath(__file__))

if __name__ == '__main__':
    max_num_blocks = 6
    max_num_blockers = 6
    buffer_radius = 0
    num_same = 2

    for num_blocks, num_blockers in itertools.product(
        range(1, max_num_blocks + 1), range(max_num_blockers + 1)
    ):
        for max_stack in range(1, num_blocks + 1):
            for i in range(num_same):
                yaml_data = make_problem.make_random_problem(
                    num_blocks=num_blocks,
                    num_blockers=num_blockers,
                    colorize=True,
                    buffer_radius=buffer_radius,
                    max_stack_num=max_stack
                )
                outpath = f"{FILEPATH}/problems/autogenerated/{num_blocks}_{num_blockers}_{max_stack}_{i}.yaml"
                with open(outpath, "w") as stream:
                    yaml.dump(yaml_data, stream, default_flow_style=False)
                print('Written', outpath)
