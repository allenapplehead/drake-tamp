import matplotlib
import yaml

matplotlib.use("Agg")
import yaml
from experiments.kitchen.kitchen_data_generation import make_problem
import itertools
import os
FILEPATH, _ = os.path.split(os.path.realpath(__file__))

if __name__ == '__main__':
    max_cabbages = 4
    max_raddishes = 4
    max_glasses = 4
    num_same = 2


    for num_c, num_r, num_g in itertools.product(
        range(max_cabbages + 1), range(max_raddishes + 1), range(max_glasses + 1)
    ):

        if num_c + num_r + num_g == 0:
            continue

        for num_goal in range(1, num_c + num_r + num_g + 1):

            for i in range(num_same):

                outpath = f"{FILEPATH}/problems/autogenerated/{num_c}_{num_r}_{num_g}_{i}.yaml"
                yaml_data = make_problem.make_random_problem(
                    num_cabbages=num_c,
                    num_raddishes=num_r,
                    num_glasses=num_g,
                    buffer_radius=0,
                    prob_tray=0.4,
                    prob_sink=0.1,
                    num_goal = None
                ) 
                with open(outpath, "w") as stream:
                    yaml.dump(yaml_data, stream, default_flow_style=False)
                print('Written', outpath)
